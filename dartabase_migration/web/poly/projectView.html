<dom-module id="custom-project-view">
    <template>
        <style>
            paper-button {
                border: 1px solid #d81b60;
            }
        </style>
        <span class="card-album-title">Project: {{project.name}}</span>
        <span class="card-album-name"> {{project.path}}</span>

        <div class="projectView" style$="border: 1px solid {{project.colorPalette['A200'][0]}};">
            <!--div class="">Current Migration: {{project.currentMigration.version}} + migrationDirection : {{project.migrationDirection}}</div-->
            <div class="configView" style$="border: 1px solid {{project.colorPalette['A200'][0]}};height:80px;">
                <custom-config-view project="{{project}}" status="{{project.serverStatus}}"></custom-config-view>
            </div>
            <div class="migrationView" style$="border: 1px solid {{project.colorPalette['A100'][0]}};">
                <div class="">Migrations:</div>
                <table style="width:100%;">
                    <tr>
                        <td style="width:50%;">
                            <div class="migrationContentLeft">
                                <template is="dom-repeat" items="{{project.migrations}}">
                                    <!--template repeat="{{migration in project.migrations}}"-->

                                    <template is="dom-if" if="{{item != project.selectedMigration}}">

                                        <template is="dom-if" if="{{item.state == 'current'}}">
                                            <!--suppress XmlDuplicatedId, XmlDuplicatedId -->
                                            <div id="{{item.version}}" class="currentMigration"
                                                 on-tap="setActive" index="{{item.index}}">
                                                <div class="text">{{item.version}} --
                                                    current
                                                </div>
                                            </div>
                                        </template>

                                        <template is="dom-if" if="{{item.state != 'current'}}">
                                            <div id="{{item.version}}"
                                                 index="{{item.index}}"
                                                 class="{{item.state}}Migration"
                                                 on-tap="setActive">
                                                <div class="text">
                                                    {{item.version}}
                                                </div>
                                            </div>
                                        </template>
                                    </template>

                                    <template is="dom-if" if="{{item == project.selectedMigration}}">

                                        <template is="dom-if" if="{{item.state == 'current'}}">
                                            <div id="{{item.version}}" class="currentMigration currentSelection"
                                                 on-tap="setActive" index="{{item.index}}">
                                                <div class="text">{{item.version}} --
                                                    current
                                                </div>
                                            </div>
                                        </template>

                                        <template is="dom-if" if="{{item.state != 'current'}}">
                                            <div id="{{item.version}}"
                                                 index="{{item.index}}"
                                                 class="{{item.state}}Migration currentSelection"
                                                 on-tap="setActive">
                                                <div class="text">
                                                    {{item.version}}
                                                </div>
                                            </div>
                                        </template>
                                    </template>

                                </template>
                                <br/>
                                <template is="dom-if" if="{{project.selectedMigration.state == 'current'}}">
                                    <paper-button raised disabled="true">migrate
                                    </paper-button>
                                </template>
                                <template is="dom-if" if="{{project.selectedMigration.state == 'older'}}">
                                    <paper-button raised on-tap="runMigration">
                                        migrate to older version
                                    </paper-button>
                                </template>
                                <template is="dom-if" if="{{project.selectedMigration.state == 'newer'}}">
                                    <paper-button raised on-tap="runMigration">
                                        migrate to newer version
                                    </paper-button>
                                </template>
                                <custom-create-migration project="{{project}}"></custom-create-migration>
                            </div>
                        </td>
                        <td style="width:50%;">
                            <div class="migrationContentRight">
                                <custom-migration-view
                                        migration="{{project.selectedMigration}}"></custom-migration-view>
                            </div>
                        </td>
                    </tr>
                </table>

            </div>

        </div>
    </template>
</dom-module>
