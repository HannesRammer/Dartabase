<dom-module id="custom-migration-list-view">
    <template>
        <style>
            paper-material {
                --shadow-elevation-4dp: {

                    box-shadow: 0 4px 5px 0 rgba(0, 164, 228, 0.14),
                    0 1px 10px 0 rgba(0, 164, 228, 0.12),
                    0 2px 4px -1px rgba(0, 164, 228, 0.4);
                };

                width: 95%;
                margin: 5px auto;
                padding: 10px;
                height: 100%;
                overflow: auto;
            }
            paper-item {
                 font-size: 1vw;
             }

            paper-listbox {
                width: 40%;
                float: left;
            }

            custom-migration-view {
                width: 50%;
                float: left;
            }

            .migrations {
                vertical-align: middle;
                text-align: center;
                padding: 10px;
                min-height: 500px;
                overflow: auto;
            }
        </style>
        <paper-material class="migrations" elevation="2">
            Migrations:
            <br/>
            <paper-listbox>
                <template is="dom-repeat" items="{{ project.migrations }}">
                    <template is="dom-if" if="{{ isCurrentMigration(item.state) }}">
                        <paper-item id="{{ item.version }}" on-tap="setSelectedMigration">
                            {{item.index}}:{{ item.version }} -- current
                        </paper-item>
                    </template>
                    <template is="dom-if" if="{{ !isCurrentMigration(item.state) }}">
                        <paper-item id="{{ item.version }}" on-tap="setSelectedMigration">
                            {{item.index}}:{{ item.version }}
                        </paper-item>
                    </template>
                </template>
            </paper-listbox>
            <custom-migration-view migration="{{ project.selectedMigration }}">
            </custom-migration-view>
            <template is="dom-if" if="{{ isNothingToDo(project.selectedMigration.state) }}">
                <paper-button raised disabled="true">
                    migrate
                </paper-button>
            </template>
            <template is="dom-if" if="{{ isOlderMigration(project.selectedMigration.state) }}">
                <paper-button raised on-tap="runMigration">
                    migrate to older version
                </paper-button>
            </template>
            <template is="dom-if" if="{{ isNewerMigration(project.selectedMigration.state) }}">
                <paper-button raised on-tap="runMigration">
                    migrate to newer version
                </paper-button>
            </template>

        </paper-material>
    </template>
</dom-module>
